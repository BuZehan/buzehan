(function(){"use strict";var e={8349:function(e,t,n){var i=n(9242),o=n(3396);function s(e,t,n,i,s,r){const a=(0,o.up)("HomeView");return(0,o.wg)(),(0,o.j4)(a)}const r={class:"home"};function a(e,t,n,i,s,a){const c=(0,o.up)("HelloWorld");return(0,o.wg)(),(0,o.iD)("div",r,[(0,o.Wm)(c)])}var c=n(7139);const h=e=>((0,o.dD)("data-v-c716fc06"),e=e(),(0,o.Cn)(),e),l={class:"container"},d={class:"header"},p={ref:"listWrapper",class:"chat-list-wrapper"},u={key:0,class:"oneself"},g={href:"javascript:;"},m=["src"],w={key:1,class:"oneself"},f={href:"javascript:;"},b=["src"],_={key:0,class:"AI"},v=h((()=>(0,o._)("a",{href:"javascript:;"},[(0,o._)("img",{src:"https://i.postimg.cc/jdS60KQW/openai.png",alt:""})],-1))),T={key:1,class:"AI"},y={key:0,href:"javascript:;"},j=h((()=>(0,o._)("img",{src:"https://i.postimg.cc/jdS60KQW/openai.png",alt:""},null,-1))),k=[j],O={key:1},x=["onClick","src"],I={key:2},L={class:"chat-wrapper"},C=["disabled"],S=h((()=>(0,o._)("span",null,"努力响应中... 请稍后",-1))),M=[S],D={id:"threeWrapper",ref:"listWrapper"},W=h((()=>(0,o._)("p",null,[(0,o._)("span"),(0,o._)("i")],-1))),z={ref:"loadText"},A=h((()=>(0,o._)("i",null,"temperature：要使用的采样策略。 接近 1 的值会给模型带来更多风险/创造力，而接近 0 的值会生成明确定义的答案。",-1))),P=["src"];function H(e,t,n,s,r,a){return(0,o.wg)(),(0,o.iD)("div",l,[(0,o._)("h2",d,(0,c.zw)(this.titleText),1),(0,o._)("div",p,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(r.chatList,((e,t)=>((0,o.wg)(),(0,o.iD)("div",{class:"chat-item",key:t},["self"===e.from?((0,o.wg)(),(0,o.iD)(o.HY,{key:0},[1===e.showType&&1===this.chatModel?((0,o.wg)(),(0,o.iD)("p",u,[(0,o._)("span",null,(0,c.zw)(e.text),1),(0,o._)("a",g,[(0,o._)("img",{src:e.face,alt:""},null,8,m)])])):(0,o.kq)("",!0),0===e.showType&&0===this.chatModel?((0,o.wg)(),(0,o.iD)("p",w,[(0,o._)("span",null,(0,c.zw)(e.text)+"123",1),(0,o._)("a",f,[(0,o._)("img",{src:e.face,alt:""},null,8,b)])])):(0,o.kq)("",!0)],64)):((0,o.wg)(),(0,o.iD)(o.HY,{key:1},[1===r.chatModel&&1===e.showType?((0,o.wg)(),(0,o.iD)("p",_,[v,(0,o._)("span",null,(0,c.zw)(e.text),1)])):(0,o.kq)("",!0),0===r.chatModel&&0===e.showType?((0,o.wg)(),(0,o.iD)("p",T,[e.url||e.text?((0,o.wg)(),(0,o.iD)("a",y,k)):(0,o.kq)("",!0),e.url?((0,o.wg)(),(0,o.iD)("span",O,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.url,((e,t)=>((0,o.wg)(),(0,o.iD)("span",{key:t,href:""},[(0,o._)("img",{onClick:t=>a.showImgFn(e.url),src:e.url,alt:""},null,8,x)])))),128))])):(0,o.kq)("",!0),e.text?((0,o.wg)(),(0,o.iD)("span",I,(0,c.zw)(e.text),1)):(0,o.kq)("",!0)])):(0,o.kq)("",!0)],64))])))),128))],512),(0,o._)("div",L,[(0,o.wy)((0,o._)("input",{class:"chatInput",type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>r.prompt=e)},null,512),[[i.nr,r.prompt]]),(0,o._)("button",{disabled:this.isAble,ref:"sendBtn",onClick:t[1]||(t[1]=(...e)=>a.submitForm&&a.submitForm(...e))},(0,c.zw)(r.currentTime),9,C),(0,o._)("button",{ref:"changeModle",onClick:t[2]||(t[2]=(...e)=>a.changeModel&&a.changeModel(...e))},(0,c.zw)(1===r.chatModel?"作图":"对话"),513)]),(0,o._)("div",{onClick:t[3]||(t[3]=(...e)=>a.close&&a.close(...e)),class:(0,c.C_)([r.isLoading?"loading":"close"]),ref:"loading"},M,2),(0,o._)("div",{class:(0,c.C_)([r.isStart?"isStart":"close"])},[(0,o._)("div",D,[W,(0,o._)("h1",z,null,512)],512),(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>r.api_key=e),type:"password",placeholder:"请输入API keys"},null,512),[[i.nr,r.api_key]]),(0,o._)("button",{onClick:t[5]||(t[5]=(...e)=>a.ok&&a.ok(...e))},"确  认"),(0,o._)("p",null,[(0,o.Uk)(" temperature  "),(0,o.wy)((0,o._)("input",{class:"range",type:"range",ref:"range",name:"",id:"",onChange:t[6]||(t[6]=(...t)=>e.changeRange&&e.changeRange(...t)),"onUpdate:modelValue":t[7]||(t[7]=e=>r.temperature=e),min:"0",max:"1",step:"0.1"},null,544),[[i.nr,r.temperature]]),(0,o._)("span",null,(0,c.zw)(r.temperature),1)]),A],2),(0,o._)("div",{onClick:t[9]||(t[9]=(...e)=>a.closeShowImgFn&&a.closeShowImgFn(...e)),class:(0,c.C_)({showImgUrl:r.showImgUrl})},[(0,o._)("img",{onClick:t[8]||(t[8]=(...e)=>a.closeShowImgFn&&a.closeShowImgFn(...e)),src:r.showImgUrl,alt:""},null,8,P)],2)])}n(7658);var R={Observe(e){for(const t in e)if(Object.hasOwnProperty.call(e,t)){let n=[],i=e[t];Object.defineProperty(e,t,{get(){return window.__fn&&!n.includes(window.__fn)&&n.push(window.__fn),i},set(e){i=e,n.map((e=>e()))}})}},autoRun(e){window.__fn=e,e(),window.__fn=null}};const U={ref:"threeWrapper",id:"threeWrapper"};function F(e,t,n,i,s,r){return(0,o.wg)(),(0,o.iD)("div",U,null,512)}var E=n(7327),q=n(4543),K=n(1989),$=n(9469),Z=n(1114);class Q{constructor(e,t={width:300,height:300}){(0,E.Z)(this,"Render",(()=>{this.ThreeObject.controls.update(),this.ThreeObject.renderer.render(this.ThreeObject.scene,this.ThreeObject.camera);const e=this.ThreeObject.clock.getDelta();try{this.ThreeObject.mixer.update(e)}catch(t){}requestAnimationFrame(this.Render)})),this._this=null,this.container=e,this.width=t.width,this.height=t.height,this.ThreeObject={}}CreateCamera(e,t,n,i,o){this.ThreeObject.camera=new Z.cPb(e,t,n,i),this.ThreeObject.camera.position.set(...o),this.ThreeObject.scene.add(this.ThreeObject.camera)}SetRenderSize(){this.ThreeObject.renderer=new Z.CP7,this.ThreeObject.renderer.setSize(this.width,this.height),this.container.value.appendChild(this.ThreeObject.renderer.domElement),this.ThreeObject.renderer.setClearColor(16777215,1)}SetLoader(){this.ThreeObject.dracoLoader=new K._,this.ThreeObject.dracoLoader.setDecoderPath("./draco/"),this.ThreeObject.manager=new Z.lLk,this.ThreeObject.manager.onProgress=function(e,t,n){},this.ThreeObject.loader=new $.E(this.ThreeObject.manager),this.ThreeObject.loader.setDRACOLoader(this.ThreeObject.dracoLoader),this.ThreeObject.loader.load("./LittlestTokyo.glb",(e=>{console.log("glTF加载中");const t=e.scene;t.position.set(1,1,0),t.scale.set(.02,.02,.02),this.ThreeObject.scene.add(t),this.ThreeObject.mixer=new Z.Xcj(t),this.ThreeObject.mixer.clipAction(e.animations[0]).play(),this.Render()}),(function(e){}),(function(e){console.log("err :",e)}))}SetControls(){this.ThreeObject.controls=new q.z(this.ThreeObject.camera,this.ThreeObject.renderer.domElement),this.ThreeObject.controls.enableDamping=!0}AddingLight(){var e=new Z.cek(16777215);e.position.set(40,20,30),this.ThreeObject.scene.add(e),this.ThreeObject.renderer.outputEncoding=Z.knz;var t=new Z.Mig(16707583);this.ThreeObject.scene.add(t)}Init(){try{this.container.value.style.width=`${this.width}px`,this.container.value.style.height=`${this.height}px`,this.container.value.style.position="absolute",this.container.value.style.zIndex=1e4,this.container.value.style.border="1px solid #888",this.container.value.style.borderRadius="5px",this.container.value.style.left="50%",this.container.value.style.transform="translateX(-50%)"}catch(e){console.log("this.container :",this.container),console.log("error :",e)}this.ThreeObject.scene=new Z.xsS,this.CreateCamera(75,this.width/this.height,.1,1e3,[5,0,9]),this.SetRenderSize(),this.SetLoader(),this.SetControls(),this.AddingLight(),this.ThreeObject.clock=new Z.SUY,this.Render(),window.addEventListener("resize",(()=>{camera.aspect=container.innerWidth/container.innerHeight,camera.updateProjectionMatrix(),renderer.setSize(container.innerWidth,container.innerHeight),renderer.setPixelRatio(window.devicePixelRatio)}))}}var V=n(6027),Y=n(4870),X={name:"Three01",setup(){const e=(0,Y.iH)(null);return(0,V.nextTick)((()=>{const t=new Q(e);t.Init(),console.log("Three :",t)})),{threeWrapper:e}}},B=n(89);const N=(0,B.Z)(X,[["render",F],["__scopeId","data-v-09ded367"]]);var G=N,J=n(5939),ee=(n(5461),(e,t,n)=>{let i=window.innerWidth/2,o=350;function s(){let t=e.children[0].children[0],n=e.children[0].children[1],i=e.children[0];if(100===window.__Loading.loading)return t.textContent="加载完成",n.style.width=window.__Loading.loading+"%",console.log("模型加载完成"),i.style.opacity=0,void(i=null);t.textContent=window.__Loading.loading+"%",n.style.width=window.__Loading.loading+"%"}e.offsetHeight&&e.offsetWidth&&(i=e.offsetWidth,o=e.offsetHeight),R.autoRun(s);const r=new Z.xsS,a=new Z.cPb(75,i/o,.1,1e3);a.position.set(5,0,9),r.add(a);const c=new Z.CP7;c.setSize(i,o),e.appendChild(c.domElement),c.setClearColor(268435455,1);var h=new Z.cek(16777215);h.position.set(40,20,30),r.add(h);const l=new K._;l.setDecoderPath("./draco/");var d=new Z.Mig(16707583);r.add(d);let p=null;c.outputEncoding=Z.knz;const u=new Z.lLk;u.onProgress=function(e,t,n){},t=0,n=0;const g=new $.E(u);g.setDRACOLoader(l),g.load("./LittlestTokyo.glb",(function(e){console.log("加载中");const i=e.scene;i.position.set(1,1,0),i.scale.set(.02,.02,.02),r.add(i),t=0,n=0,window.__Loading.loading=100,p=new Z.Xcj(i),p.clipAction(e.animations[0]).play(),f()}),(function(e){n>Math.ceil(t/e.loaded*100)||(n=Math.ceil(t/e.loaded*100),console.log("loading......",n+"%"),window.__Loading.loading=n,t=e.loaded)}),(function(e){alert("模型加载失败，刷新或者直接进入"),console.log("error :",e)}));const m=new q.z(a,c.domElement);m.enableDamping=!0;const w=new Z.SUY;function f(){m.update(),c.render(r,a);const e=w.getDelta();try{p.update(e)}catch(t){}requestAnimationFrame(f)}f(),window.addEventListener("resize",(()=>{a.aspect=e.innerWidth/e.innerHeight,a.updateProjectionMatrix(),c.setSize(e.innerWidth,e.innerHeight),c.setPixelRatio(window.devicePixelRatio)}))}),te=n(5574);window.__Loading={loading:0};var ne={name:"HelloWorld",components:{three01:G},props:{msg:String},data(){return{titleText:"OpenAI",showImgUrl:"",chatModel:1,isStart:!1,currentTime:"发送",isAble:!1,isLoading:!1,api_key:"",prompt:"",chatMsg:"",prompt:"",max_tokens:1e3,model:"text-davinci-003",mobile:!0,response:"",urlData:"",chatList:[{from:"bot",face:"https://i.postimg.cc/jdS60KQW/openai.png",text:"嗨~，很高兴认识你！",showType:1},{from:"bot",face:te,url:"",text:"想画什么,详细描述给我",showType:0}],temperature:0,baseUrl:"https://api.openai.com/v1/completions",isOff:!0}},mounted(){let e=window.__Loading;R.Observe(e);let t={loadNum:0,lastLoading:0};this.isStart=!0,ee(this.$refs.listWrapper,t)},methods:{showImgFn(e){this.showImgUrl=e},closeShowImgFn(){this.showImgUrl=""},changeModel(){this.chatModel=1===this.chatModel?0:1,this.baseUrl=1===this.chatModel?"https://api.openai.com/v1/completions":"https://api.openai.com/v1/images/generations",console.log(this.chatModel)},submitForm(){this.titleText="对方输入中...",setTimeout((()=>{this.isLoading=!1}),800);let e=null;if(e=1===this.chatModel?{prompt:this.prompt,model:this.model,max_tokens:this.max_tokens}:{prompt:this.prompt,n:1,size:"1024x1024"},this.isAble||(this.isLoading=!0),this.chatList.push({from:"self",face:te,text:this.prompt,showType:this.chatModel}),J.Z.post(this.baseUrl,e,{headers:{"Content-Type":"application/json",Authorization:"Bearer "+this.api_key}}).then((e=>{this.titleText="AI",this.isLoading=!1,1===this.chatModel?(this.response=e.data.choices[0].text,this.chatList.push({from:"bot",face:"https://i.postimg.cc/jdS60KQW/openai.png",text:this.response,showType:1})):0===this.chatModel&&(this.response=e.data,this.chatList.push({from:"bot",face:"https://i.postimg.cc/jdS60KQW/openai.png",url:this.response.data,showType:0}))})).catch((e=>{this.titleText="AI",this.isLoading=!0,this.$refs.loading.children[0].innerText=e,console.log("error :",e),setTimeout((()=>{this.isLoading=!1}),2e3)})),this.prompt="",this.isAble=!0,!0===this.isAble){let e=5,t=setInterval((()=>{this.currentTime=0==e?"发送":e,0===e&&clearInterval(t),e--}),1e3);return console.log("禁用按钮"),void setTimeout((()=>{this.isAble=!1,console.log("解除禁用")}),5e3)}},close(){this.isLoading=!1},ok(){this.isStart=!1}},destroyed(){window.__Loading=null},watch:{chatList:{handler(e){this.$nextTick((()=>{let e=this.$refs.listWrapper;e.scrollTop=e.scrollHeight})),localStorage.getItem("chatList")&&(this.chatList=this.$store.getters["chatInfo/chatListInfo"]),this.$store.dispatch("chatInfo/InsertChatInfo",this.chatList)},immediate:!0,deep:!0}}};const ie=(0,B.Z)(ne,[["render",H],["__scopeId","data-v-c716fc06"]]);var oe=ie,se={name:"HomeView",components:{HelloWorld:oe}};const re=(0,B.Z)(se,[["render",a]]);var ae=re,ce={name:"APP",components:{HomeView:ae}};const he=(0,B.Z)(ce,[["render",s]]);var le=he,de=n(2483);const pe=[{path:"/",name:"home",component:ae}],ue=(0,de.p7)({history:(0,de.r5)(),routes:pe});var ge=ue,me=n(65),we=n(2415);let fe=n(5574);var be={namespaced:!0,state:()=>({chatInfo:[{from:"bot",face:"https://i.postimg.cc/jdS60KQW/openai.png",text:"嗨~，很高兴认识你~",showType:1},{from:"bot",face:fe,url:"",text:"想画什么,详细描述给我",showType:0}]}),getters:{chatListInfo(e){return e.chatInfo}},mutations:{InsertChatInfo(e,t){e.chatInfo=t}},actions:{InsertChatInfo(e,t){e.commit("InsertChatInfo",t)}}},_e=(0,me.MT)({modules:{chatInfo:be},plugins:[(0,we.Z)({key:"chatList",paths:["chatInfo"]})]});(0,i.ri)(le).use(_e).use(ge).mount("#app")},5574:function(e,t,n){e.exports=n.p+"static/img/avatar.9ef15ea1.jpg"}},t={};function n(i){var o=t[i];if(void 0!==o)return o.exports;var s=t[i]={exports:{}};return e[i](s,s.exports,n),s.exports}n.m=e,function(){var e=[];n.O=function(t,i,o,s){if(!i){var r=1/0;for(l=0;l<e.length;l++){i=e[l][0],o=e[l][1],s=e[l][2];for(var a=!0,c=0;c<i.length;c++)(!1&s||r>=s)&&Object.keys(n.O).every((function(e){return n.O[e](i[c])}))?i.splice(c--,1):(a=!1,s<r&&(r=s));if(a){e.splice(l--,1);var h=o();void 0!==h&&(t=h)}}return t}s=s||0;for(var l=e.length;l>0&&e[l-1][2]>s;l--)e[l]=e[l-1];e[l]=[i,o,s]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.p=""}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,i){var o,s,r=i[0],a=i[1],c=i[2],h=0;if(r.some((function(t){return 0!==e[t]}))){for(o in a)n.o(a,o)&&(n.m[o]=a[o]);if(c)var l=c(n)}for(t&&t(i);h<r.length;h++)s=r[h],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return n.O(l)},i=self["webpackChunkmy_chat_gpt"]=self["webpackChunkmy_chat_gpt"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=n.O(void 0,[998],(function(){return n(8349)}));i=n.O(i)})();