(function(){"use strict";var t={3448:function(t,e,n){var o=n(9242),i=n(3396);function s(t,e,n,o,s,a){const r=(0,i.up)("HomeView");return(0,i.wg)(),(0,i.j4)(r)}const a={class:"home"};function r(t,e,n,o,s,r){const l=(0,i.up)("HelloWorld");return(0,i.wg)(),(0,i.iD)("div",a,[(0,i.Wm)(l)])}var l=n(7139);const c=t=>((0,i.dD)("data-v-469e30bb"),t=t(),(0,i.Cn)(),t),h={class:"container"},p=c((()=>(0,i._)("h2",{class:"header"}," 对话框 ",-1))),d={ref:"listWrapper",class:"chat-list-wrapper"},u={key:0,class:"oneself"},g={href:"javascript:;"},f=["src"],m={key:1,class:"oneself"},w={href:"javascript:;"},_=["src"],v={key:0,class:"AI"},y=c((()=>(0,i._)("a",{href:"javascript:;"},[(0,i._)("img",{src:"https://i.postimg.cc/jdS60KQW/openai.png",alt:""})],-1))),k={key:1,class:"AI"},b={key:0,href:"javascript:;"},I=c((()=>(0,i._)("img",{src:"https://i.postimg.cc/jdS60KQW/openai.png",alt:""},null,-1))),L=[I],x={key:1},C=["onClick","src"],M={key:2},T={class:"chat-wrapper"},j=["disabled"],S=c((()=>(0,i._)("span",null,"努力响应中... 请稍后",-1))),D=[S],W={id:"threeWrapper",ref:"listWrapper"},O=c((()=>(0,i._)("p",null,[(0,i._)("span"),(0,i._)("i")],-1))),H={ref:"loadText"},z=c((()=>(0,i._)("i",null,"temperature：要使用的采样策略。 接近 1 的值会给模型带来更多风险/创造力，而接近 0 的值会生成明确定义的答案。",-1))),A=["src"];function P(t,e,n,s,a,r){return(0,i.wg)(),(0,i.iD)("div",h,[p,(0,i._)("div",d,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(a.chatList,((t,e)=>((0,i.wg)(),(0,i.iD)("div",{class:"chat-item",key:e},["self"===t.from?((0,i.wg)(),(0,i.iD)(i.HY,{key:0},[1===t.showType&&1===this.chatModel?((0,i.wg)(),(0,i.iD)("p",u,[(0,i._)("span",null,(0,l.zw)(t.text),1),(0,i._)("a",g,[(0,i._)("img",{src:t.face,alt:""},null,8,f)])])):(0,i.kq)("",!0),0===t.showType&&0===this.chatModel?((0,i.wg)(),(0,i.iD)("p",m,[(0,i._)("span",null,(0,l.zw)(t.text)+"123",1),(0,i._)("a",w,[(0,i._)("img",{src:t.face,alt:""},null,8,_)])])):(0,i.kq)("",!0)],64)):((0,i.wg)(),(0,i.iD)(i.HY,{key:1},[1===a.chatModel&&1===t.showType?((0,i.wg)(),(0,i.iD)("p",v,[y,(0,i._)("span",null,(0,l.zw)(t.text),1)])):(0,i.kq)("",!0),0===a.chatModel&&0===t.showType?((0,i.wg)(),(0,i.iD)("p",k,[t.url||t.text?((0,i.wg)(),(0,i.iD)("a",b,L)):(0,i.kq)("",!0),t.url?((0,i.wg)(),(0,i.iD)("span",x,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.url,((t,e)=>((0,i.wg)(),(0,i.iD)("span",{key:e,href:""},[(0,i._)("img",{onClick:e=>r.showImgFn(t.url),src:t.url,alt:""},null,8,C)])))),128))])):(0,i.kq)("",!0),t.text?((0,i.wg)(),(0,i.iD)("span",M,(0,l.zw)(t.text),1)):(0,i.kq)("",!0)])):(0,i.kq)("",!0)],64))])))),128))],512),(0,i._)("div",T,[(0,i.wy)((0,i._)("input",{class:"chatInput",type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>a.prompt=t)},null,512),[[o.nr,a.prompt]]),(0,i._)("button",{disabled:this.isAble,ref:"sendBtn",onClick:e[1]||(e[1]=(...t)=>r.submitForm&&r.submitForm(...t))},(0,l.zw)(a.currentTime),9,j),(0,i._)("button",{ref:"changeModle",onClick:e[2]||(e[2]=(...t)=>r.changeModel&&r.changeModel(...t))},(0,l.zw)(1===a.chatModel?"作图":"对话"),513)]),(0,i._)("div",{onClick:e[3]||(e[3]=(...t)=>r.close&&r.close(...t)),class:(0,l.C_)([a.isLoading?"loading":"close"]),ref:"loading"},D,2),(0,i._)("div",{class:(0,l.C_)([a.isStart?"isStart":"close"])},[(0,i._)("div",W,[O,(0,i._)("h1",H,null,512)],512),(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":e[4]||(e[4]=t=>a.api_key=t),type:"password",placeholder:"请输入API keys"},null,512),[[o.nr,a.api_key]]),(0,i._)("button",{onClick:e[5]||(e[5]=(...t)=>r.ok&&r.ok(...t))},"确  认"),(0,i._)("p",null,[(0,i.Uk)(" temperature  "),(0,i.wy)((0,i._)("input",{class:"range",type:"range",ref:"range",name:"",id:"",onChange:e[6]||(e[6]=(...e)=>t.changeRange&&t.changeRange(...e)),"onUpdate:modelValue":e[7]||(e[7]=t=>a.temperature=t),min:"0",max:"1",step:"0.1"},null,544),[[o.nr,a.temperature]]),(0,i._)("span",null,(0,l.zw)(a.temperature),1)]),z],2),(0,i._)("div",{onClick:e[9]||(e[9]=(...t)=>r.closeShowImgFn&&r.closeShowImgFn(...t)),class:(0,l.C_)({showImgUrl:a.showImgUrl})},[(0,i._)("img",{onClick:e[8]||(e[8]=(...t)=>r.closeShowImgFn&&r.closeShowImgFn(...t)),src:a.showImgUrl,alt:""},null,8,A)],2)])}n(7658);var U={Observe(t){for(const e in t)if(Object.hasOwnProperty.call(t,e)){let n=[],o=t[e];Object.defineProperty(t,e,{get(){return window.__fn&&!n.includes(window.__fn)&&n.push(window.__fn),o},set(t){o=t,n.map((t=>t()))}})}},autoRun(t){window.__fn=t,t(),window.__fn=null}},F=n(5939),q=n(1114),K=n(4543),R=(n(5461),n(1989)),E=n(9469),Q=(t,e,n)=>{let o=window.innerWidth/2,i=350;function s(){let e=t.children[0].children[0],n=t.children[0].children[1],o=t.children[0];if(100===window.__Loading.loading)return e.textContent="加载完成",n.style.width=window.__Loading.loading+"%",console.log("模型加载完成"),o.style.opacity=0,void(o=null);e.textContent=window.__Loading.loading+"%",n.style.width=window.__Loading.loading+"%"}t.offsetHeight&&t.offsetWidth&&(o=t.offsetWidth,i=t.offsetHeight),U.autoRun(s);const a=new q.xsS,r=new q.cPb(75,o/i,.1,1e3);r.position.set(5,2,8),a.add(r);const l=new q.CP7;l.setSize(o,i),t.appendChild(l.domElement),l.setClearColor(268435455,1);var c=new q.cek(16777215);c.position.set(40,20,30),a.add(c);const h=new R._;h.setDecoderPath("./draco/");var p=new q.Mig(16707583);a.add(p);let d=null;l.outputEncoding=q.knz;const u=new q.lLk;u.onProgress=function(t,e,n){},e=0,n=0;const g=new E.E(u);g.setDRACOLoader(h),g.load("./LittlestTokyo.glb",(function(t){console.log("加载中");const o=t.scene;o.position.set(1,1,0),o.scale.set(.02,.02,.02),a.add(o),e=0,n=0,window.__Loading.loading=100,d=new q.Xcj(o),d.clipAction(t.animations[0]).play(),w()}),(function(t){n>Math.ceil(e/t.loaded*100)||(n=Math.ceil(e/t.loaded*100),console.log("loading......",n+"%"),window.__Loading.loading=n,e=t.loaded)}),(function(t){alert("模型加载失败，刷新或者直接进入"),console.log("error :",t)}));const f=new K.z(r,l.domElement);f.enableDamping=!0;const m=new q.SUY;function w(){f.update(),l.render(a,r);const t=m.getDelta();try{d.update(t)}catch(e){}f.update(),requestAnimationFrame(w)}w(),window.addEventListener("resize",(()=>{r.aspect=t.innerWidth/t.innerHeight,r.updateProjectionMatrix(),l.setSize(t.innerWidth,t.innerHeight),l.setPixelRatio(window.devicePixelRatio)}))},V=n(5574);window.__Loading={loading:0};var $={name:"HelloWorld",props:{msg:String},data(){return{showImgUrl:"",chatModel:1,isStart:!1,currentTime:"发送",isAble:!1,isLoading:!1,api_key:"",prompt:"",chatMsg:"",prompt:"",max_tokens:1e3,model:"text-davinci-003",mobile:!0,response:"",urlData:"",chatList:[{from:"bot",face:"https://i.postimg.cc/jdS60KQW/openai.png",text:"嗨~，很高兴认识你！",showType:1},{from:"bot",face:V,url:"",text:"想画什么,详细描述给我",showType:0}],temperature:0,baseUrl:"https://api.openai.com/v1/completions",isOff:!0}},mounted(){let t=window.__Loading;U.Observe(t);let e={loadNum:0,lastLoading:0};this.isStart=!0,Q(this.$refs.listWrapper,e)},methods:{showImgFn(t){this.showImgUrl=t},closeShowImgFn(){this.showImgUrl=""},changeModel(){this.chatModel=1===this.chatModel?0:1,this.baseUrl=1===this.chatModel?"https://api.openai.com/v1/completions":"https://api.openai.com/v1/images/generations",console.log(this.chatModel)},submitForm(){let t=null;if(t=1===this.chatModel?{prompt:this.prompt,model:this.model,max_tokens:this.max_tokens}:{prompt:this.prompt,n:1,size:"1024x1024"},this.isAble||(this.isLoading=!0),this.chatList.push({from:"self",face:V,text:this.prompt,showType:this.chatModel}),F.Z.post(this.baseUrl,t,{headers:{"Content-Type":"application/json",Authorization:"Bearer "+this.api_key}}).then((t=>{this.isLoading=!1,1===this.chatModel?(this.response=t.data.choices[0].text,this.chatList.push({from:"bot",face:"https://i.postimg.cc/jdS60KQW/openai.png",text:this.response,showType:1})):0===this.chatModel&&(this.response=t.data,this.chatList.push({from:"bot",face:"https://i.postimg.cc/jdS60KQW/openai.png",url:this.response.data,showType:0}))})).catch((t=>{this.isLoading=!0,this.$refs.loading.children[0].innerText=t,console.log("error :",t),setTimeout((()=>{this.isLoading=!1}),1e3)})),this.prompt="",this.isAble=!0,!0===this.isAble){let t=5,e=setInterval((()=>{this.currentTime=0==t?"发送":t,0===t&&clearInterval(e),t--}),1e3);return console.log("禁用按钮"),void setTimeout((()=>{this.isAble=!1,console.log("解除禁用")}),5e3)}},close(){this.isLoading=!1},ok(){this.isStart=!1}},destroyed(){window.__Loading=null},watch:{chatList:{handler(t){this.$nextTick((()=>{let t=this.$refs.listWrapper;t.scrollTop=t.scrollHeight})),localStorage.getItem("chatList")&&(this.chatList=this.$store.getters["chatInfo/chatListInfo"]),console.log("this.chatList :",this.chatList),this.$store.dispatch("chatInfo/InsertChatInfo",this.chatList)},immediate:!0,deep:!0}}},Y=n(89);const Z=(0,Y.Z)($,[["render",P],["__scopeId","data-v-469e30bb"]]);var B=Z,N={name:"HomeView",components:{HelloWorld:B}};const X=(0,Y.Z)(N,[["render",r]]);var G=X,J={name:"APP",components:{HomeView:G}};const tt=(0,Y.Z)(J,[["render",s]]);var et=tt,nt=n(2483);const ot=[{path:"/",name:"home",component:G}],it=(0,nt.p7)({history:(0,nt.r5)(),routes:ot});var st=it,at=n(65),rt=n(2415);let lt=n(5574);var ct={namespaced:!0,state:()=>({chatInfo:[{from:"bot",face:"https://i.postimg.cc/jdS60KQW/openai.png",text:"嗨~，很高兴认识你~",showType:1},{from:"bot",face:lt,url:"",text:"想画什么,详细描述给我",showType:0}]}),getters:{chatListInfo(t){return t.chatInfo}},mutations:{InsertChatInfo(t,e){t.chatInfo=e}},actions:{InsertChatInfo(t,e){t.commit("InsertChatInfo",e)}}},ht=(0,at.MT)({modules:{chatInfo:ct},plugins:[(0,rt.Z)({key:"chatList",paths:["chatInfo"]})]});(0,o.ri)(et).use(ht).use(st).mount("#app")},5574:function(t,e,n){t.exports=n.p+"static/img/avatar.9ef15ea1.jpg"}},e={};function n(o){var i=e[o];if(void 0!==i)return i.exports;var s=e[o]={exports:{}};return t[o](s,s.exports,n),s.exports}n.m=t,function(){var t=[];n.O=function(e,o,i,s){if(!o){var a=1/0;for(h=0;h<t.length;h++){o=t[h][0],i=t[h][1],s=t[h][2];for(var r=!0,l=0;l<o.length;l++)(!1&s||a>=s)&&Object.keys(n.O).every((function(t){return n.O[t](o[l])}))?o.splice(l--,1):(r=!1,s<a&&(a=s));if(r){t.splice(h--,1);var c=i();void 0!==c&&(e=c)}}return e}s=s||0;for(var h=t.length;h>0&&t[h-1][2]>s;h--)t[h]=t[h-1];t[h]=[o,i,s]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){n.p=""}(),function(){var t={143:0};n.O.j=function(e){return 0===t[e]};var e=function(e,o){var i,s,a=o[0],r=o[1],l=o[2],c=0;if(a.some((function(e){return 0!==t[e]}))){for(i in r)n.o(r,i)&&(n.m[i]=r[i]);if(l)var h=l(n)}for(e&&e(o);c<a.length;c++)s=a[c],n.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return n.O(h)},o=self["webpackChunkmy_chat_gpt"]=self["webpackChunkmy_chat_gpt"]||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))}();var o=n.O(void 0,[998],(function(){return n(3448)}));o=n.O(o)})();