(function(){"use strict";var e={5021:function(e,t,n){var o=n(9242),i=n(3396);function s(e,t,n,o,s,a){const r=(0,i.up)("HomeView");return(0,i.wg)(),(0,i.j4)(r)}const a={class:"home"};function r(e,t,n,o,s,r){const l=(0,i.up)("HelloWorld");return(0,i.wg)(),(0,i.iD)("div",a,[(0,i.Wm)(l)])}var l=n(7139);const c=e=>((0,i.dD)("data-v-5a4a216f"),e=e(),(0,i.Cn)(),e),p={class:"container"},d=c((()=>(0,i._)("h2",{class:"header"}," 对话框 ",-1))),h={ref:"listWrapper",class:"chat-list-wrapper"},u={key:0,class:"oneself"},g={href:"javascript:;"},m=["src"],w={key:1,class:"oneself"},f={href:"javascript:;"},_=["src"],v={key:0,class:"AI"},y=c((()=>(0,i._)("a",{href:"javascript:;"},[(0,i._)("img",{src:"https://i.postimg.cc/jdS60KQW/openai.png",alt:""})],-1))),k={key:1,class:"AI"},b={key:0,href:"javascript:;"},x=c((()=>(0,i._)("img",{src:"https://i.postimg.cc/jdS60KQW/openai.png",alt:""},null,-1))),L=[x],M={key:1},C=["onClick","src"],j={key:2},T={class:"chat-wrapper"},D=["disabled"],I=c((()=>(0,i._)("span",null,"努力响应中... 请稍后",-1))),S=[I],W={id:"threeWrapper",ref:"listWrapper"},O=c((()=>(0,i._)("p",null,[(0,i._)("span"),(0,i._)("i")],-1))),H={ref:"loadText"},z=c((()=>(0,i._)("i",null,"temperature：要使用的采样策略。 接近 1 的值会给模型带来更多风险/创造力，而接近 0 的值会生成明确定义的答案。",-1))),A=["src"];function P(e,t,n,s,a,r){return(0,i.wg)(),(0,i.iD)("div",p,[d,(0,i._)("div",h,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(a.chatList,((e,t)=>((0,i.wg)(),(0,i.iD)("div",{class:"chat-item",key:t},["self"===e.from?((0,i.wg)(),(0,i.iD)(i.HY,{key:0},[1===e.showType&&1===this.chatModel?((0,i.wg)(),(0,i.iD)("p",u,[(0,i._)("span",null,(0,l.zw)(e.text),1),(0,i._)("a",g,[(0,i._)("img",{src:e.face,alt:""},null,8,m)])])):(0,i.kq)("",!0),0===e.showType&&0===this.chatModel?((0,i.wg)(),(0,i.iD)("p",w,[(0,i._)("span",null,(0,l.zw)(e.text)+"123",1),(0,i._)("a",f,[(0,i._)("img",{src:e.face,alt:""},null,8,_)])])):(0,i.kq)("",!0)],64)):((0,i.wg)(),(0,i.iD)(i.HY,{key:1},[1===a.chatModel&&1===e.showType?((0,i.wg)(),(0,i.iD)("p",v,[y,(0,i._)("span",null,(0,l.zw)(e.text),1)])):(0,i.kq)("",!0),0===a.chatModel&&0===e.showType?((0,i.wg)(),(0,i.iD)("p",k,[e.url||e.text?((0,i.wg)(),(0,i.iD)("a",b,L)):(0,i.kq)("",!0),e.url?((0,i.wg)(),(0,i.iD)("span",M,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.url,((e,t)=>((0,i.wg)(),(0,i.iD)("span",{key:t,href:""},[(0,i._)("img",{onClick:t=>r.showImgFn(e.url),src:e.url,alt:""},null,8,C)])))),128))])):(0,i.kq)("",!0),e.text?((0,i.wg)(),(0,i.iD)("span",j,(0,l.zw)(e.text),1)):(0,i.kq)("",!0)])):(0,i.kq)("",!0)],64))])))),128))],512),(0,i._)("div",T,[(0,i.wy)((0,i._)("input",{class:"chatInput",type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>a.prompt=e)},null,512),[[o.nr,a.prompt]]),(0,i._)("button",{disabled:this.isAble,ref:"sendBtn",onClick:t[1]||(t[1]=(...e)=>r.submitForm&&r.submitForm(...e))},(0,l.zw)(a.currentTime),9,D),(0,i._)("button",{ref:"changeModle",onClick:t[2]||(t[2]=(...e)=>r.changeModel&&r.changeModel(...e))},(0,l.zw)(1===a.chatModel?"作图":"对话"),513)]),(0,i._)("div",{onClick:t[3]||(t[3]=(...e)=>r.close&&r.close(...e)),class:(0,l.C_)([a.isLoading?"loading":"close"]),ref:"loading"},S,2),(0,i._)("div",{class:(0,l.C_)([a.isStart?"isStart":"close"])},[(0,i._)("div",W,[O,(0,i._)("h1",H,null,512)],512),(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>a.api_key=e),type:"password",placeholder:"请输入API keys"},null,512),[[o.nr,a.api_key]]),(0,i._)("button",{onClick:t[5]||(t[5]=(...e)=>r.ok&&r.ok(...e))},"确  认"),(0,i._)("p",null,[(0,i.Uk)(" temperature  "),(0,i.wy)((0,i._)("input",{class:"range",type:"range",ref:"range",name:"",id:"",onChange:t[6]||(t[6]=(...t)=>e.changeRange&&e.changeRange(...t)),"onUpdate:modelValue":t[7]||(t[7]=e=>a.temperature=e),min:"0",max:"1",step:"0.1"},null,544),[[o.nr,a.temperature]]),(0,i._)("span",null,(0,l.zw)(a.temperature),1)]),z],2),(0,i._)("div",{onClick:t[9]||(t[9]=(...e)=>r.closeShowImgFn&&r.closeShowImgFn(...e)),class:(0,l.C_)({showImgUrl:a.showImgUrl})},[(0,i._)("img",{onClick:t[8]||(t[8]=(...e)=>r.closeShowImgFn&&r.closeShowImgFn(...e)),src:a.showImgUrl,alt:""},null,8,A)],2)])}n(7658);var U={Observe(e){for(const t in e)if(Object.hasOwnProperty.call(e,t)){let n=[],o=e[t];Object.defineProperty(e,t,{get(){return window.__fn&&!n.includes(window.__fn)&&n.push(window.__fn),o},set(e){o=e,n.map((e=>e()))}})}},autoRun(e){window.__fn=e,e(),window.__fn=null}},F=n(5939),q=n(1114),K=n(4543),R=(n(5461),n(1989)),E=n(9469),V=(e,t,n)=>{function o(){let t=e.children[0].children[0],n=e.children[0].children[1],o=e.children[0];if(100===window.__Loading.loading)return t.textContent="加载完成",n.style.width=window.__Loading.loading+"%",console.log("模型加载完成"),o.style.opacity=0,void(o=null);t.textContent=window.__Loading.loading+"%",n.style.width=window.__Loading.loading+"%"}U.autoRun(o);const i=new q.xsS,s=new q.cPb(75,e.offsetWidth/2/(e.offsetHeight/2),.1,1e3);s.position.set(5,2,8),i.add(s);const a=new q.CP7;a.setSize(e.offsetWidth,e.offsetHeight),e.appendChild(a.domElement),a.setClearColor(268435455,1);var r=new q.cek(16777215);r.position.set(40,20,30),i.add(r);const l=new R._;l.setDecoderPath("./draco/");var c=new q.Mig(16777215);i.add(c);let p=null;a.outputEncoding=q.knz;const d=new q.lLk;d.onProgress=function(e,t,n){},t=0,n=0;const h=new E.E(d);h.setDRACOLoader(l),h.load("./LittlestTokyo.glb",(function(e){console.log("加载中");const o=e.scene;o.position.set(1,1,0),o.scale.set(.02,.02,.02),i.add(o),t=0,n=0,window.__Loading.loading=100,p=new q.Xcj(o),p.clipAction(e.animations[0]).play(),m()}),(function(e){console.log("xhr :",e),n>Math.ceil(t/e.loaded*100)||(n=Math.ceil(t/e.loaded*100),console.log("loading......",n+"%"),window.__Loading.loading=n,t=e.loaded)}),(function(e){alert("模型加载失败，刷新或者直接进入"),console.log("error :",e)}));const u=new K.z(s,a.domElement);u.enableDamping=!0;const g=new q.SUY;function m(){u.update(),a.render(i,s);const e=g.getDelta();try{p.update(e)}catch(t){}u.update(),requestAnimationFrame(m)}m(),window.addEventListener("resize",(()=>{s.aspect=e.innerWidth/e.innerHeight,s.updateProjectionMatrix(),a.setSize(e.innerWidth,e.innerHeight),a.setPixelRatio(window.devicePixelRatio)}))},Q=n(5574);window.__Loading={loading:0};var Y={name:"HelloWorld",props:{msg:String},data(){return{showImgUrl:"",chatModel:1,isStart:!1,currentTime:"发送",isAble:!1,isLoading:!1,api_key:"",prompt:"",chatMsg:"",prompt:"",max_tokens:1e3,model:"text-davinci-003",mobile:!0,response:"",urlData:"",chatList:[{from:"bot",face:"https://i.postimg.cc/jdS60KQW/openai.png",text:"嗨~，很高兴认识你！",showType:1},{from:"bot",face:Q,url:"",text:"想画什么,详细描述给我",showType:0}],temperature:0,baseUrl:"https://api.openai.com/v1/completions"}},mounted(){let e=window.__Loading;U.Observe(e);let t={loadNum:0,lastLoading:0};this.isStart=!0,V(this.$refs.listWrapper,t),console.log("object :",this.$refs.listWrapper)},methods:{showImgFn(e){this.showImgUrl=e},closeShowImgFn(){this.showImgUrl=""},changeModel(){this.chatModel=1===this.chatModel?0:1,this.baseUrl=1===this.chatModel?"https://api.openai.com/v1/completions":"https://api.openai.com/v1/images/generations",console.log(this.chatModel)},submitForm(){let e=null;if(e=1===this.chatModel?{prompt:this.prompt,model:this.model,max_tokens:this.max_tokens}:{prompt:this.prompt,n:1,size:"1024x1024"},this.isAble||(this.isLoading=!0),this.chatList.push({from:"self",face:Q,text:this.prompt,showType:this.chatModel}),F.Z.post(this.baseUrl,e,{headers:{"Content-Type":"application/json",Authorization:"Bearer "+this.api_key}}).then((e=>{this.isLoading=!1,1===this.chatModel?(this.response=e.data.choices[0].text,this.chatList.push({from:"bot",face:"https://i.postimg.cc/jdS60KQW/openai.png",text:this.response,showType:1})):0===this.chatModel&&(this.response=e.data,this.chatList.push({from:"bot",face:"https://i.postimg.cc/jdS60KQW/openai.png",url:this.response.data,showType:0}))})).catch((e=>{this.isLoading=!0,this.$refs.loading.children[0].innerText=e,console.log("error :",e),setTimeout((()=>{this.isLoading=!1}),1e3)})),this.prompt="",this.isAble=!0,!0===this.isAble){let e=5,t=setInterval((()=>{this.currentTime=0==e?"发送":e,0===e&&clearInterval(t),e--}),1e3);return console.log("禁用按钮"),void setTimeout((()=>{this.isAble=!1,console.log("解除禁用")}),5e3)}},close(){this.isLoading=!1},ok(){this.isStart=!1}},destroyed(){window.__Loading=null},watch:{chatList:{handler(e){this.$nextTick((()=>{let e=this.$refs.listWrapper;e.scrollTop=e.scrollHeight}))},immediate:!0,deep:!0}}},Z=n(89);const $=(0,Z.Z)(Y,[["render",P],["__scopeId","data-v-5a4a216f"]]);var B=$,N={name:"HomeView",components:{HelloWorld:B}};const X=(0,Z.Z)(N,[["render",r]]);var G=X,J={name:"APP",components:{HomeView:G}};const ee=(0,Z.Z)(J,[["render",s]]);var te=ee,ne=n(2483);const oe=[{path:"/",name:"home",component:G}],ie=(0,ne.p7)({history:(0,ne.r5)(),routes:oe});var se=ie,ae=n(65),re=n(2415),le=(0,ae.MT)({state:{},getters:{},mutations:{},actions:{},modules:{plugins:[(0,re.Z)({key:"net-ease-cloud-music",paths:["ChatInfo"]})]}});(0,o.ri)(te).use(le).use(se).mount("#app")},5574:function(e,t,n){e.exports=n.p+"static/img/avatar.9ef15ea1.jpg"}},t={};function n(o){var i=t[o];if(void 0!==i)return i.exports;var s=t[o]={exports:{}};return e[o](s,s.exports,n),s.exports}n.m=e,function(){var e=[];n.O=function(t,o,i,s){if(!o){var a=1/0;for(p=0;p<e.length;p++){o=e[p][0],i=e[p][1],s=e[p][2];for(var r=!0,l=0;l<o.length;l++)(!1&s||a>=s)&&Object.keys(n.O).every((function(e){return n.O[e](o[l])}))?o.splice(l--,1):(r=!1,s<a&&(a=s));if(r){e.splice(p--,1);var c=i();void 0!==c&&(t=c)}}return t}s=s||0;for(var p=e.length;p>0&&e[p-1][2]>s;p--)e[p]=e[p-1];e[p]=[o,i,s]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.p=""}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,o){var i,s,a=o[0],r=o[1],l=o[2],c=0;if(a.some((function(t){return 0!==e[t]}))){for(i in r)n.o(r,i)&&(n.m[i]=r[i]);if(l)var p=l(n)}for(t&&t(o);c<a.length;c++)s=a[c],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return n.O(p)},o=self["webpackChunkmy_chat_gpt"]=self["webpackChunkmy_chat_gpt"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=n.O(void 0,[998],(function(){return n(5021)}));o=n.O(o)})();